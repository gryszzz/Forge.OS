import{r as m,a as tt,R as $e,A as st,C as ze,X as Be,Y as Oe,T as De,b as ke,c as nt,B as ot,d as Ee,e as Fe}from"./charts-vendor-BGq5t5mK.js";var Me={exports:{}},le={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rt=m,it=Symbol.for("react.element"),at=Symbol.for("react.fragment"),lt=Object.prototype.hasOwnProperty,dt=rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ct={key:!0,ref:!0,__self:!0,__source:!0};function Ue(s,n,r){var i,o={},g=null,p=null;r!==void 0&&(g=""+r),n.key!==void 0&&(g=""+n.key),n.ref!==void 0&&(p=n.ref);for(i in n)lt.call(n,i)&&!ct.hasOwnProperty(i)&&(o[i]=n[i]);if(s&&s.defaultProps)for(i in n=s.defaultProps,n)o[i]===void 0&&(o[i]=n[i]);return{$$typeof:it,type:s,key:g,ref:p,props:o,_owner:dt.current}}le.Fragment=at;le.jsx=Ue;le.jsxs=Ue;Me.exports=le;var e=Me.exports,me={},Ce=tt;me.createRoot=Ce.createRoot,me.hydrateRoot=Ce.hydrateRoot;const he=(s,n=4)=>parseFloat(s||0).toFixed(n),ee=s=>new Date(s).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),Te=s=>new Date(s).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),D=s=>s?`${s.slice(0,18)}...${s.slice(-6)}`:"â€”",Re=(s,n,r)=>Math.min(r,Math.max(n,s)),Pe=()=>Math.random().toString(36).slice(2,10),ae=s=>{const n=String(s||"").trim().toLowerCase();return n.startsWith("kaspa:")||n.startsWith("kaspatest:")},Ie=s=>{const n=String(s||"").trim();if(!ae(n))throw new Error("Invalid Kaspa address. Must start with 'kaspa:' or 'kaspatest:'");return n},t={bg:"#05070A",s1:"#0B1118",s2:"#101923",s3:"#16222F",border:"#213043",muted:"#32435A",accent:"#39DDB6",aLow:"#112C2A",text:"#EAF1F8",dim:"#8FA0B5",danger:"#FF5D7A",dLow:"#311520",warn:"#F7B267",wLow:"#322515",ok:"#4ADE80",purple:"#8F7BFF",shadow:"0 18px 45px rgba(0,0,0,0.38)"},a={fontFamily:"'IBM Plex Mono','SFMono-Regular',Menlo,Monaco,monospace"},pt={},Y=pt,We=Y.VITE_KAS_API||"https://api.kaspa.org",J=Y.VITE_KAS_EXPLORER||"https://explorer.kaspa.org",de=Y.VITE_KAS_NETWORK||"kaspa_testnet_10",Ge=Y.VITE_KAS_NETWORK_LABEL||"Kaspa Testnet 10",Q=Y.VITE_KAS_WS_URL||"",ge=Y.VITE_KASPIUM_DEEP_LINK_SCHEME||"kaspium://",G="kaspa:qpv7fcvdlz6th4hqjtm9qkkms2dw0raem963x3hm8glu3kjgj7922vy69hv85",W=.2,B=.3,H=.7,we=.5,He=2e-4,_e=.75,V={detect(){return{kasware:typeof window<"u"&&!!window.kasware,kaspium:!0}},async connectKasware(){const s=window.kasware;if(!s)throw new Error("Kasware extension not detected. Install from kasware.org");const n=await s.requestAccounts();if(!(n!=null&&n.length))throw new Error("No accounts returned from Kasware");const r=await s.getNetwork();return{address:n[0],network:r,provider:"kasware"}},connectKaspium(s){return{address:Ie(s),network:de,provider:"kaspium"}},async getKaswareBalance(){const s=window.kasware;if(!s)throw new Error("Kasware not connected");const n=await s.getBalance();return he((n.total||0)/1e8,4)},async sendKasware(s,n){const r=window.kasware;if(!r)throw new Error("Kasware not connected");const i=Math.floor(n*1e8);return await r.sendKaspa(s,i)},async sendKaspium(s,n,r){if(Ie(s),typeof window>"u")throw new Error("Kaspium deep-link is only available in browser environments");const o=`${ge.endsWith("://")?ge:`${ge}://`}send?address=${encodeURIComponent(s)}&amount=${encodeURIComponent(String(n))}${r?`&note=${encodeURIComponent(r)}`:""}`;window.location.href=o;const g=window.prompt("Complete the transfer in Kaspium, then paste the broadcast txid:");if(!g)throw new Error("Transaction not confirmed. No txid provided.");return g.trim()},async signMessageKasware(s){const n=window.kasware;if(!n)throw new Error("Kasware not connected");return n.signMessage(s)}},y=({children:s,p:n=16,style:r={}})=>e.jsx("div",{style:{background:`linear-gradient(180deg, ${t.s2} 0%, ${t.s1} 100%)`,border:`1px solid ${t.border}`,borderRadius:12,padding:n,boxShadow:t.shadow,backdropFilter:"blur(6px)",...r},children:s}),b=({children:s,color:n})=>e.jsx("div",{style:{fontSize:10,color:n||t.dim,letterSpacing:"0.1em",textTransform:"uppercase",marginBottom:6,...a},children:s}),E=({text:s,color:n=t.accent,dot:r})=>e.jsxs("span",{style:{background:n+"18",color:n,border:`1px solid ${n}35`,borderRadius:3,padding:"2px 8px",fontSize:11,letterSpacing:"0.04em",...a,display:"inline-flex",alignItems:"center",gap:5},children:[r&&e.jsx("span",{style:{width:5,height:5,borderRadius:"50%",background:n,display:"inline-block"}}),s]}),j=({children:s,onClick:n,variant:r="primary",disabled:i,style:o={},size:g="md"})=>{const p={primary:{bg:`linear-gradient(90deg, ${t.accent} 0%, #7BE9CF 100%)`,color:"#04110E",border:`1px solid ${t.accent}55`,shadow:"0 10px 24px rgba(57,221,182,0.26)"},ghost:{bg:"transparent",color:t.text,border:`1px solid ${t.border}`,shadow:"none"},danger:{bg:t.dLow,color:t.danger,border:`1px solid ${t.danger}55`,shadow:"none"},warn:{bg:t.wLow,color:t.warn,border:`1px solid ${t.warn}50`,shadow:"none"}}[r];return e.jsx("button",{onClick:n,disabled:i,onMouseEnter:x=>{i||(x.currentTarget.style.transform="translateY(-1px)",x.currentTarget.style.filter="brightness(1.06)")},onMouseLeave:x=>{x.currentTarget.style.transform="translateY(0)",x.currentTarget.style.filter="brightness(1)"},style:{background:p.bg,color:p.color,border:p.border,borderRadius:10,padding:g==="sm"?"6px 12px":"10px 18px",fontSize:g==="sm"?11:12,cursor:i?"not-allowed":"pointer",opacity:i?.45:1,fontWeight:700,letterSpacing:"0.08em",textTransform:"uppercase",boxShadow:p.shadow,transition:"all 0.18s ease",...a,...o},children:s})},O=({label:s,value:n,onChange:r,placeholder:i,type:o="text",hint:g,suffix:p})=>e.jsxs("div",{style:{marginBottom:16},children:[s&&e.jsx(b,{children:s}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{value:n,onChange:x=>r(x.target.value),type:o,placeholder:i,style:{width:"100%",background:t.s3,border:`1px solid ${t.border}`,borderRadius:10,color:t.text,padding:`10px ${p?"40px":"12px"} 10px 12px`,fontSize:12,...a,outline:"none",boxSizing:"border-box",transition:"border-color 0.16s ease, box-shadow 0.16s ease"},onFocus:x=>{x.target.style.borderColor=t.accent,x.target.style.boxShadow=`0 0 0 2px ${t.accent}22`},onBlur:x=>{x.target.style.borderColor=t.border,x.target.style.boxShadow="none"}}),p&&e.jsx("span",{style:{position:"absolute",right:12,top:"50%",transform:"translateY(-50%)",fontSize:11,color:t.dim,...a},children:p})]}),g&&e.jsx("div",{style:{fontSize:11,color:t.dim,marginTop:4},children:g})]}),Ve=({m:s=12})=>e.jsx("div",{style:{height:1,background:t.border,margin:`${s}px 0`}}),Z=({href:s,label:n="â†—"})=>e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",style:{fontSize:11,color:t.accent,...a,textDecoration:"none",border:`1px solid ${t.accent}25`,padding:"3px 9px",borderRadius:3},children:n});function xt({onConnect:s}){const[n,r]=m.useState(!1),[i,o]=m.useState(null),[g,p]=m.useState(""),x=V.detect(),l=async h=>{r(!0),o(null);try{let f;h==="kasware"?f=await V.connectKasware():h==="kaspium"?f=V.connectKaspium(g):f={address:"kaspa:qp3t6flvhqd4d9jkk8m5v0xelwm6zxx99qx5p8f3j8vcm9y5la2vsnjsklav",network:de,provider:"demo"},s(f)}catch(f){o(f.message)}r(!1)},u=[{k:"kasware",l:"Kasware",desc:"Browser extension wallet",available:x.kasware,icon:"ðŸ¦Š"},{k:"kaspium",l:"Kaspium",desc:"Mobile wallet via deep-link",available:x.kaspium,icon:"ðŸ“±"},{k:"demo",l:"Demo Mode",desc:"Simulated wallet â€” UI preview only",available:!0,icon:"ðŸ§ª"}];return e.jsxs("div",{style:{minHeight:"100vh",background:t.bg,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:24},children:[e.jsxs("div",{style:{marginBottom:32,textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:28,fontWeight:700,...a,letterSpacing:"0.12em",marginBottom:8},children:[e.jsx("span",{style:{color:t.accent},children:"FORGE"}),e.jsx("span",{style:{color:t.text},children:"OS"})]}),e.jsx("div",{style:{fontSize:12,color:t.dim,letterSpacing:"0.08em",...a},children:"AI-NATIVE FINANCIAL OPERATING SYSTEM Â· POWERED BY KASPA"})]}),e.jsxs(y,{p:32,style:{maxWidth:440,width:"100%"},children:[e.jsx("div",{style:{fontSize:14,color:t.text,fontWeight:700,...a,marginBottom:4},children:"Connect Wallet"}),e.jsx("div",{style:{fontSize:12,color:t.dim,marginBottom:22},children:"All operations are wallet-native. No custodial infrastructure. No private keys stored server-side."}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:u.map(h=>e.jsxs("div",{onClick:()=>h.available&&!n&&h.k!=="kaspium"&&l(h.k),style:{padding:"14px 16px",borderRadius:5,border:`1px solid ${h.available?t.border:t.muted}`,background:h.available?t.s2:t.s1,cursor:h.available?"pointer":"not-allowed",opacity:h.available?1:.45,transition:"all 0.15s",display:"flex",alignItems:"center",gap:14},onMouseEnter:f=>{h.available&&(f.currentTarget.style.borderColor=t.accent,f.currentTarget.style.background=t.aLow)},onMouseLeave:f=>{f.currentTarget.style.borderColor=h.available?t.border:t.muted,f.currentTarget.style.background=h.available?t.s2:t.s1},children:[e.jsx("span",{style:{fontSize:22},children:h.icon}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:13,color:t.text,fontWeight:700,...a,marginBottom:2},children:h.l}),e.jsx("div",{style:{fontSize:11,color:t.dim},children:h.desc})]}),h.available?e.jsx(E,{text:h.k==="kaspium"?"SET ADDRESS":"CONNECT",color:t.accent}):e.jsx(E,{text:"COMING SOON",color:t.muted})]},h.k))}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx(O,{label:"Kaspium Address",value:g,onChange:p,placeholder:"kaspa:... or kaspatest:...",hint:"Required for Kaspium mobile connect flow"}),e.jsx(j,{onClick:()=>l("kaspium"),disabled:n||!ae(g),variant:"ghost",style:{width:"100%",padding:"10px 0"},children:"CONNECT KASPIUM"})]}),i&&e.jsx("div",{style:{marginTop:14,padding:"10px 14px",background:t.dLow,borderRadius:4,fontSize:12,color:t.danger,...a},children:i}),e.jsx(Ve,{m:18}),e.jsxs("div",{style:{fontSize:11,color:t.dim,...a,lineHeight:1.6},children:["forge.os never requests your private key Â· All transaction signing happens in your wallet Â· ",Ge," only"]})]})]})}function fe({tx:s,wallet:n,onSign:r,onReject:i}){const[o,g]=m.useState(!1),[p,x]=m.useState(null),l=async()=>{g(!0),x(null);try{let u;(n==null?void 0:n.provider)==="kasware"?u=await V.sendKasware(s.to,s.amount_kas):(n==null?void 0:n.provider)==="kaspium"?u=await V.sendKaspium(s.to,s.amount_kas,s.purpose):(await new Promise(h=>setTimeout(h,1200)),u=Array.from({length:64},()=>"0123456789abcdef"[Math.floor(Math.random()*16)]).join("")),r({...s,txid:u,signed_at:Date.now()})}catch(u){x(u.message)}g(!1)};return e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:20},children:e.jsxs(y,{p:28,style:{maxWidth:480,width:"100%",border:`1px solid ${t.warn}40`},children:[e.jsx("div",{style:{fontSize:14,color:t.warn,fontWeight:700,...a,marginBottom:4},children:"âš  TRANSACTION SIGNING REQUIRED"}),e.jsx("div",{style:{fontSize:12,color:t.dim,marginBottom:18},children:(n==null?void 0:n.provider)==="kasware"?"Kasware will prompt you to sign.":(n==null?void 0:n.provider)==="kaspium"?"Kaspium deep-link will open; paste txid after broadcast.":"Confirm this transaction to proceed."}),e.jsx(y,{p:0,style:{marginBottom:16},children:[["Type",s.type],["From",D(s.from)],["To",D(s.to)],["Amount",`${s.amount_kas} KAS`],["Fee",`${He} KAS`],["Purpose",s.purpose]].map(([u,h],f,T)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"9px 14px",borderBottom:f<T.length-1?`1px solid ${t.border}`:"none"},children:[e.jsx("span",{style:{fontSize:12,color:t.dim,...a},children:u}),e.jsx("span",{style:{fontSize:12,color:t.text,...a},children:h})]},u))}),p&&e.jsxs("div",{style:{fontSize:12,color:t.danger,...a,marginBottom:12,padding:"8px 12px",background:t.dLow,borderRadius:4},children:["Error: ",p]}),e.jsxs("div",{style:{display:"flex",gap:10},children:[e.jsx(j,{onClick:i,variant:"ghost",style:{flex:1,padding:"10px 0"},children:"REJECT"}),e.jsx(j,{onClick:l,disabled:o,style:{flex:2,padding:"10px 0"},children:o?"SIGNING...":"SIGN & BROADCAST"})]}),e.jsx("div",{style:{fontSize:11,color:t.dim,marginTop:10,textAlign:"center",...a},children:"Signing occurs client-side Â· Private key never leaves your wallet"})]})})}const gt={name:"",kpiTarget:"12",capitalLimit:"5000",risk:"medium",execMode:"manual",autoApproveThreshold:"50",kpiMetric:"ROI %",horizon:30,revenueSource:"momentum",dataSources:["KAS On-Chain","Kaspa DAG"],frequency:"1h"},mt=[{v:"low",l:"Low",desc:"Tight stops. Max 5% exposure per action."},{v:"medium",l:"Medium",desc:"Balanced Kelly sizing. 10% max exposure."},{v:"high",l:"High",desc:"Aggressive. 20% max. Wide targets."}],Ye=[{v:"autonomous",l:"Fully Autonomous",desc:"Auto-signs under threshold. Manual above."},{v:"manual",l:"Manual Approval",desc:"Every action requires wallet signature."},{v:"notify",l:"Notify Only",desc:"Decisions generated, no execution."}],ut=({d:s,set:n,wallet:r})=>e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:17,color:t.text,fontWeight:700,marginBottom:3,...a},children:"Configure Agent"}),e.jsxs("div",{style:{fontSize:12,color:t.dim,marginBottom:20},children:["Connected: ",e.jsx("span",{style:{color:t.accent,...a},children:D(r==null?void 0:r.address)})]}),e.jsx(O,{label:"Agent Name",value:s.name,onChange:i=>n("name",i),placeholder:"KAS-Alpha-01"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsx(O,{label:"ROI Target",value:s.kpiTarget,onChange:i=>n("kpiTarget",i),type:"number",placeholder:"12",suffix:"%"}),e.jsx(O,{label:"Capital / Cycle",value:s.capitalLimit,onChange:i=>n("capitalLimit",i),type:"number",placeholder:"5000",suffix:"KAS"})]}),e.jsx(b,{children:"Risk Tolerance"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gap:8},children:mt.map(i=>{const o=s.risk===i.v;return e.jsxs("div",{onClick:()=>n("risk",i.v),style:{padding:"12px 10px",borderRadius:4,cursor:"pointer",border:`1px solid ${o?t.accent:t.border}`,background:o?t.aLow:t.s2,textAlign:"center",transition:"all 0.15s"},children:[e.jsx("div",{style:{fontSize:13,color:o?t.accent:t.text,fontWeight:700,...a,marginBottom:3},children:i.l}),e.jsx("div",{style:{fontSize:11,color:t.dim},children:i.desc})]},i.v)})})]}),ht=({d:s,set:n})=>e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:17,color:t.text,fontWeight:700,marginBottom:3,...a},children:"Execution & Signing"}),e.jsx("div",{style:{fontSize:12,color:t.dim,marginBottom:20},children:"Configure how the agent acts and when your wallet signs."}),Ye.map(r=>{const i=s.execMode===r.v;return e.jsxs("div",{onClick:()=>n("execMode",r.v),style:{padding:14,borderRadius:6,marginBottom:10,cursor:"pointer",border:`1px solid ${i?t.accent:t.border}`,background:i?t.aLow:t.s2,transition:"all 0.15s"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:4},children:[e.jsx("div",{style:{width:11,height:11,borderRadius:"50%",border:`2px solid ${i?t.accent:t.muted}`,background:i?t.accent:"transparent",flexShrink:0}}),e.jsx("span",{style:{fontSize:13,color:i?t.accent:t.text,fontWeight:700,...a},children:r.l})]}),e.jsx("div",{style:{fontSize:12,color:t.dim,marginLeft:21},children:r.desc})]},r.v)}),e.jsx(Ve,{}),e.jsx(O,{label:"Auto-Approve Threshold",value:s.autoApproveThreshold,onChange:r=>n("autoApproveThreshold",r),type:"number",suffix:"KAS",hint:"Transactions under this amount sign automatically in autonomous mode. Above threshold always requires manual wallet signing."})]}),ft=({d:s,wallet:n,onDeploy:r})=>{const i=s.name&&s.capitalLimit&&s.kpiTarget;return e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:17,color:t.text,fontWeight:700,marginBottom:3,...a},children:"Review & Deploy"}),e.jsx("div",{style:{fontSize:12,color:t.dim,marginBottom:18},children:"Agent vault will be provisioned. Initial funding requires a wallet signature."}),e.jsx(y,{p:0,style:{marginBottom:14},children:[["Agent",s.name||"â€”"],["Wallet",D(n==null?void 0:n.address)],["Network",(n==null?void 0:n.network)||de],["ROI Target",`${s.kpiTarget}%`],["Capital / Cycle",`${s.capitalLimit} KAS`],["Risk",s.risk.toUpperCase()],["Exec Mode",s.execMode.replace(/_/g," ").toUpperCase()],["Auto-Approve Under",`${s.autoApproveThreshold} KAS`]].map(([o,g],p,x)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"9px 16px",borderBottom:p<x.length-1?`1px solid ${t.border}`:"none"},children:[e.jsx("span",{style:{fontSize:12,color:t.dim,...a},children:o}),e.jsx("span",{style:{fontSize:12,color:t.text,...a},children:g})]},o))}),e.jsxs("div",{style:{background:t.wLow,border:`1px solid ${t.warn}30`,borderRadius:4,padding:"10px 14px",marginBottom:16,fontSize:12,color:t.dim},children:["Deployment triggers a wallet signature to provision the agent vault. Treasury address: ",e.jsx("span",{style:{color:t.accent,...a},children:D(G)})]}),e.jsx(j,{onClick:r,disabled:!i,style:{width:"100%",padding:"11px 0"},children:"DEPLOY AGENT â€” SIGN WITH WALLET"}),!i&&e.jsx("div",{style:{fontSize:11,color:t.warn,marginTop:6,textAlign:"center",...a},children:"Name, capital, and target required."})]})};function yt({wallet:s,onComplete:n}){var T;const[r,i]=m.useState(0),[o,g]=m.useState({...gt}),p=(S,L)=>g(K=>({...K,[S]:L})),[x,l]=m.useState(!1),u=()=>{l(!0)},h=S=>{l(!1),n({...o,wallet:s,deployTx:S,deployedAt:Date.now(),agentId:`forge_${Pe()}`})},f={type:"AGENT_DEPLOY",from:s==null?void 0:s.address,to:G,amount_kas:parseFloat(o.capitalLimit)||5e3,purpose:"Agent vault provisioning + initial capital"};return e.jsxs("div",{style:{maxWidth:560,margin:"36px auto",padding:"0 20px"},children:[x&&e.jsx(fe,{tx:f,wallet:s,onSign:h,onReject:()=>l(!1)}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:22},children:[e.jsx("span",{style:{fontSize:10,color:t.dim,letterSpacing:"0.12em",...a},children:"FORGEOS / NEW AGENT"}),e.jsx("span",{style:{width:1,height:12,background:t.border,display:"inline-block"}}),e.jsx(E,{text:((T=s==null?void 0:s.provider)==null?void 0:T.toUpperCase())||"CONNECTED",color:t.ok,dot:!0})]}),e.jsxs(y,{p:28,children:[e.jsx("div",{style:{display:"flex",gap:5,marginBottom:26},children:[0,1,2].map(S=>e.jsx("div",{style:{height:3,flex:1,borderRadius:2,background:S<=r?t.accent:t.muted,transition:"background 0.3s"}},S))}),r===0&&e.jsx(ut,{d:o,set:p,wallet:s}),r===1&&e.jsx(ht,{d:o,set:p}),r===2&&e.jsx(ft,{d:o,wallet:s,onDeploy:u}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:22,paddingTop:16,borderTop:`1px solid ${t.border}`},children:[e.jsx(j,{onClick:()=>i(S=>S-1),variant:"ghost",disabled:r===0,children:"BACK"}),e.jsxs("span",{style:{fontSize:11,color:t.dim,alignSelf:"center",...a},children:["STEP ",r+1," / 3"]}),r<2&&e.jsx(j,{onClick:()=>i(S=>S+1),children:"NEXT"}),r===2&&e.jsx("div",{})]})]})]})}const jt=String(We).replace(/\/+$/,""),Ne=12e3;function St(s){return`${jt}${s}`}async function ye(s){const n=new AbortController,r=setTimeout(()=>n.abort(),Ne);try{const i=await fetch(St(s),{method:"GET",headers:{Accept:"application/json"},signal:n.signal});if(!i.ok)throw new Error(`${s} ${i.status}`);return await i.json()}catch(i){throw(i==null?void 0:i.name)==="AbortError"?new Error(`Kaspa API timeout (${Ne}ms): ${s}`):i}finally{clearTimeout(r)}}function qe(s){const n=String(s||"").trim();if(!n)throw new Error("Missing Kaspa address");return encodeURIComponent(n)}function vt(s){var i;const n=(s==null?void 0:s.balance)??(s==null?void 0:s.totalBalance)??(s==null?void 0:s.availableSompi)??(s==null?void 0:s.balanceSompi)??((i=s==null?void 0:s.balances)==null?void 0:i.total)??0,r=Number(n);return Number.isFinite(r)?Math.max(0,r):0}function bt(s,n){var i;const r=(s==null?void 0:s.balanceKas)??(s==null?void 0:s.kas)??(s==null?void 0:s.balance_kas)??((i=s==null?void 0:s.balances)==null?void 0:i.kas);if(r!=null){const o=Number(r);if(Number.isFinite(o))return Math.max(0,o)}return n/1e8}function At(s){return Array.isArray(s)?s:Array.isArray(s==null?void 0:s.utxos)?s.utxos:Array.isArray(s==null?void 0:s.entries)?s.entries:[]}async function Xe(s){const n=await ye(`/addresses/${qe(s)}/balance`),r=vt(n),i=bt(n,r);return{kas:he(i,4),raw:r}}async function kt(s){const n=await ye(`/addresses/${qe(s)}/utxos`);return At(n)}async function Et(){const s=await ye("/info/blockdag");return(s==null?void 0:s.blockdag)??(s==null?void 0:s.blockDag)??s}const Ct={},je=Ct,ue=je.VITE_AI_API_URL||"https://api.anthropic.com/v1/messages",Tt=je.VITE_AI_MODEL||"claude-sonnet-4-20250514",Le=je.VITE_ANTHROPIC_API_KEY||"",Ke=3e4;function Rt(){const s={"Content-Type":"application/json"};if(ue.includes("api.anthropic.com")){if(!Le)throw new Error("Anthropic API key missing. Set VITE_ANTHROPIC_API_KEY or configure VITE_AI_API_URL to your secure backend endpoint.");s["x-api-key"]=Le,s["anthropic-version"]="2023-06-01"}return s}function It(s){try{return JSON.parse(s)}catch{throw new Error("AI response was not valid JSON")}}async function wt(s,n){var x;const r=`You are a quant-grade AI financial agent operating on the Kaspa blockchain. You use adversarial financial reasoning. Respond ONLY with a valid JSON object â€” no markdown, no prose, no code fences.

AGENT PROFILE:
Name: ${s.name}
Strategy: momentum / on-chain flow analysis
Risk Tolerance: ${s.risk} (low=conservative, high=aggressive)
KPI Target: ${s.kpiTarget}% ROI
Capital per Cycle: ${s.capitalLimit} KAS
Auto-Approve Threshold: ${s.autoApproveThreshold} KAS

KASPA ON-CHAIN DATA:
${JSON.stringify(n,null,2)}

REASONING REQUIREMENTS:
1. Apply Kelly Criterion for position sizing (kelly_fraction field)
2. Run mental Monte Carlo: estimate win probability across 100 simulated scenarios
3. Assess volatility clustering from DAA score velocity
4. Model liquidity impact of proposed position size
5. Identify behavioral finance signals (momentum, mean reversion)
6. Assess multi-step plan: entry â†’ management â†’ exit

OUTPUT (strict JSON, all fields required):
{
  "action": "ACCUMULATE or REDUCE or HOLD or REBALANCE",
  "confidence_score": 0.00,
  "risk_score": 0.00,
  "kelly_fraction": 0.00,
  "capital_allocation_kas": 0.00,
  "capital_allocation_pct": 0,
  "expected_value_pct": 0.00,
  "stop_loss_pct": 0.00,
  "take_profit_pct": 0.00,
  "monte_carlo_win_pct": 0,
  "volatility_estimate": "LOW or MEDIUM or HIGH",
  "liquidity_impact": "MINIMAL or MODERATE or SIGNIFICANT",
  "strategy_phase": "ENTRY or SCALING or HOLDING or EXIT",
  "rationale": "Two concise sentences citing specific on-chain signals and indicator logic.",
  "risk_factors": ["factor1", "factor2", "factor3"],
  "next_review_trigger": "Describe the specific condition that should trigger next decision cycle"
}`,i=ue.includes("api.anthropic.com")?{model:Tt,max_tokens:800,messages:[{role:"user",content:r}]}:{prompt:r,agent:s,kasData:n},o=new AbortController,g=setTimeout(()=>o.abort(),Ke);let p;try{const l=await fetch(ue,{method:"POST",headers:Rt(),body:JSON.stringify(i),signal:o.signal});if(!l.ok)throw new Error(`AI endpoint ${l.status}`);p=await l.json()}catch(l){throw(l==null?void 0:l.name)==="AbortError"?new Error(`AI request timeout (${Ke}ms)`):l}finally{clearTimeout(g)}if((x=p==null?void 0:p.error)!=null&&x.message)throw new Error(p.error.message);if(Array.isArray(p==null?void 0:p.content)){const l=p.content.map(u=>u.text||"").join("");return It(l.replace(/```json|```/g,"").trim())}return p!=null&&p.decision?p.decision:p}const Qe={SYSTEM:t.dim,DATA:"#6BA3FF",AI:t.accent,VALID:t.warn,EXEC:t.ok,ERROR:t.danger,SIGN:t.purple,TREASURY:t.warn},_t=s=>{const n=Date.now();return[{ts:n-72e5,type:"SYSTEM",msg:`Agent ${s} provisioned. Vault address mapped to session.`,fee:null},{ts:n-714e4,type:"SIGN",msg:"Deploy transaction signed via Kasware. Vault funded.",fee:null},{ts:n-71e5,type:"TREASURY",msg:"Protocol fee: 0.20 KAS â†’ Treasury 0.06 KAS / Pool 0.14 KAS",fee:.2},{ts:n-36e5,type:"DATA",msg:"Kaspa DAG snapshot ingested. DAA score, hashrate, UTXO set analysed.",fee:null},{ts:n-354e4,type:"AI",msg:"Quant engine invoked. Kelly criterion + Monte Carlo computed.",fee:.12},{ts:n-35e5,type:"VALID",msg:"Risk gate PASSED Â· Conf 0.82 Â· Kelly 0.08 Â· Phase: ENTRY",fee:null},{ts:n-349e4,type:"EXEC",msg:"ACCUMULATE â€” 400 KAS Â· Auto-approved (below threshold)",fee:.08},{ts:n-18e5,type:"AI",msg:"Quant engine invoked.",fee:.12},{ts:n-178e4,type:"VALID",msg:"Conf 0.71 < 0.75 threshold â€” HOLD enforced.",fee:null},{ts:n-177e4,type:"EXEC",msg:"HOLD â€” confidence gate. Position maintained.",fee:.08}]};function Nt({queue:s,wallet:n,onSign:r,onReject:i}){return e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,color:t.text,fontWeight:700,...a,marginBottom:4},children:"Action Queue"}),e.jsx("div",{style:{fontSize:12,color:t.dim,marginBottom:16},children:"Transactions pending wallet signature. Auto-approved items processed immediately."}),s.length===0&&e.jsxs(y,{p:32,style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:13,color:t.dim,...a,marginBottom:4},children:"Queue empty"}),e.jsx("div",{style:{fontSize:12,color:t.dim},children:"Pending transactions will appear here awaiting your wallet signature."})]}),s.map(o=>e.jsxs(y,{p:18,style:{marginBottom:10,border:`1px solid ${o.status==="pending"?t.warn:o.status==="signed"?t.ok:t.border}25`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:4},children:[e.jsx(E,{text:o.type,color:t.purple}),e.jsx(E,{text:o.status.toUpperCase(),color:o.status==="pending"?t.warn:o.status==="signed"?t.ok:t.dim,dot:!0})]}),e.jsx("div",{style:{fontSize:11,color:t.dim,...a},children:ee(o.ts)})]}),e.jsxs("div",{style:{fontSize:18,color:o.amount_kas>0?t.accent:t.danger,fontWeight:700,...a},children:[o.amount_kas," KAS"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:o.status==="pending"?12:0,fontSize:12,color:t.dim,...a},children:[e.jsxs("div",{children:["To: ",e.jsx("span",{style:{color:t.text},children:D(o.to)})]}),e.jsxs("div",{children:["Fee split: ",e.jsxs("span",{style:{color:t.text},children:["Pool ",(o.amount_kas*H).toFixed(4)," / Treasury ",(o.amount_kas*B).toFixed(4)]})]})]}),o.status==="pending"&&e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx(j,{onClick:()=>i(o.id),variant:"danger",size:"sm",children:"REJECT"}),e.jsx(j,{onClick:()=>r(o),size:"sm",children:"SIGN & BROADCAST"})]}),o.status==="signed"&&o.txid&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsxs("span",{style:{fontSize:11,color:t.ok,...a},children:["âœ“ ",o.txid.slice(0,32),"..."]}),e.jsx(Z,{href:`${J}/txs/${o.txid}`,label:"EXPLORER â†—"})]})]},o.id))]})}function Lt({decisions:s,loading:n,onRun:r}){var p;const i=s[0],o=i==null?void 0:i.dec,g=(o==null?void 0:o.action)==="ACCUMULATE"?t.ok:(o==null?void 0:o.action)==="REDUCE"?t.danger:(o==null?void 0:o.action)==="REBALANCE"?t.purple:t.warn;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,color:t.text,fontWeight:700,...a},children:"Quant Intelligence Layer"}),e.jsx("div",{style:{fontSize:11,color:t.dim},children:"Kelly criterion Â· Monte Carlo Â· Volatility clustering Â· Behavioral inference"})]}),e.jsx(j,{onClick:r,disabled:n,children:n?"PROCESSING...":"RUN QUANT CYCLE"})]}),n&&e.jsxs(y,{p:24,style:{textAlign:"center",marginBottom:12},children:[e.jsx("div",{style:{fontSize:12,color:t.dim,...a,marginBottom:6},children:"Running quant engine..."}),e.jsx("div",{style:{fontSize:11,color:t.dim},children:"Kaspa on-chain data â†’ Kelly sizing â†’ Monte Carlo â†’ Decision"})]}),!o&&!n&&e.jsxs(y,{p:40,style:{textAlign:"center",marginBottom:12},children:[e.jsx("div",{style:{fontSize:13,color:t.dim,...a,marginBottom:6},children:"No intelligence output yet."}),e.jsx("div",{style:{fontSize:12,color:t.dim},children:"Run a quant cycle to generate a structured trade decision with Kelly sizing and Monte Carlo confidence."})]}),o&&e.jsxs(e.Fragment,{children:[e.jsxs(y,{p:18,style:{marginBottom:10,border:`1px solid ${g}25`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:14},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx(E,{text:o.action,color:g}),e.jsx(E,{text:o.strategy_phase,color:t.purple}),e.jsx("span",{style:{fontSize:11,color:t.dim,...a},children:ee(i.ts)})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx(E,{text:`CONF ${o.confidence_score}`,color:o.confidence_score>=.8?t.ok:t.warn}),e.jsx(E,{text:`RISK ${o.risk_score}`,color:o.risk_score<=.4?t.ok:o.risk_score<=.7?t.warn:t.danger})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4,1fr)",gap:10,marginBottom:14},children:[["Kelly Fraction",`${(o.kelly_fraction*100).toFixed(1)}%`,t.accent],["Monte Carlo Win",`${o.monte_carlo_win_pct}%`,t.ok],["Capital Alloc",`${o.capital_allocation_kas} KAS`,t.text],["Expected Value",`+${o.expected_value_pct}%`,t.ok],["Stop Loss",`-${o.stop_loss_pct}%`,t.danger],["Take Profit",`+${o.take_profit_pct}%`,t.ok],["Volatility",o.volatility_estimate,o.volatility_estimate==="HIGH"?t.danger:o.volatility_estimate==="MEDIUM"?t.warn:t.ok],["Liquidity Impact",o.liquidity_impact,o.liquidity_impact==="SIGNIFICANT"?t.danger:t.dim]].map(([x,l,u])=>e.jsxs("div",{style:{background:t.s2,borderRadius:4,padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:10,color:t.dim,...a,letterSpacing:"0.06em",marginBottom:4},children:x}),e.jsx("div",{style:{fontSize:13,color:u,fontWeight:700,...a},children:l})]},x))}),e.jsxs("div",{style:{background:t.s2,borderRadius:4,padding:"10px 14px",marginBottom:12},children:[e.jsx(b,{children:"Decision Rationale"}),e.jsx("div",{style:{fontSize:13,color:t.text,lineHeight:1.5},children:o.rationale})]}),((p=o.risk_factors)==null?void 0:p.length)>0&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx(b,{children:"Risk Factors"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:o.risk_factors.map((x,l)=>e.jsx(E,{text:x,color:t.warn},l))})]}),e.jsxs("div",{style:{background:t.aLow,borderRadius:4,padding:"10px 14px"},children:[e.jsx(b,{color:t.accent,children:"Next Review Trigger"}),e.jsx("div",{style:{fontSize:12,color:t.text},children:o.next_review_trigger})]})]}),s.length>1&&e.jsxs(y,{p:0,children:[e.jsx("div",{style:{padding:"11px 16px",borderBottom:`1px solid ${t.border}`},children:e.jsxs("span",{style:{fontSize:11,color:t.dim,...a},children:["DECISION HISTORY â€” ",s.length," records"]})}),s.slice(1).map((x,l)=>{const u=x.dec.action==="ACCUMULATE"?t.ok:x.dec.action==="REDUCE"?t.danger:t.warn;return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"90px 120px 80px 80px 1fr",gap:10,padding:"9px 16px",borderBottom:`1px solid ${t.border}`,alignItems:"center"},children:[e.jsx("span",{style:{fontSize:11,color:t.dim,...a},children:ee(x.ts)}),e.jsx(E,{text:x.dec.action,color:u}),e.jsxs("span",{style:{fontSize:12,color:t.text,...a},children:[x.dec.capital_allocation_kas," KAS"]}),e.jsxs("span",{style:{fontSize:12,color:x.dec.confidence_score>=.8?t.ok:t.warn,...a},children:["c:",x.dec.confidence_score]}),e.jsx("span",{style:{fontSize:11,color:t.dim,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:x.dec.rationale})]},l)})]})]})]})}const Kt=({active:s,payload:n})=>{var i;if(!s||!(n!=null&&n.length))return null;const r=(i=n[0])==null?void 0:i.payload;return e.jsxs("div",{style:{background:t.s2,border:`1px solid ${t.border}`,borderRadius:4,padding:"8px 12px"},children:[e.jsx("div",{style:{fontSize:10,color:t.dim,...a,marginBottom:3},children:r==null?void 0:r.label}),e.jsxs("div",{style:{fontSize:13,color:(r==null?void 0:r.roi)>=0?t.ok:t.danger,fontWeight:700,...a},children:[(r==null?void 0:r.roi)>=0?"+":"",r==null?void 0:r.roi,"%"]})]})};function $t({decisions:s,kpiTarget:n}){const[r,i]=m.useState(()=>{const l=Date.now();let u=0;return Array.from({length:16},(h,f)=>(u=Re(u+(Math.random()-.42)*1.4,-15,30),{label:Te(l-(15-f)*36e5*2),roi:parseFloat(u.toFixed(2)),target:Number(n)||12}))}),o=m.useRef(0);m.useEffect(()=>{var f;if(s.length<=o.current)return;o.current=s.length;const l=(f=s[0])==null?void 0:f.dec,u=r[r.length-1],h=(l==null?void 0:l.action)==="ACCUMULATE"?Math.random()*1.2:(l==null?void 0:l.action)==="REDUCE"?-Math.random()*.8:(Math.random()-.5)*.4;i(T=>[...T.slice(-40),{label:Te(Date.now()),roi:parseFloat((u.roi+h).toFixed(2)),target:Number(n)||12}])},[s.length]);const g=r[r.length-1],p=Number(n)||12,x=Re(g.roi/p*100,0,100).toFixed(0);return e.jsxs(y,{p:18,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:10},children:[e.jsxs("div",{children:[e.jsx(b,{children:"Simulated Performance â€” Agent ROI"}),e.jsxs("span",{style:{fontSize:24,color:g.roi>=0?t.ok:t.danger,fontWeight:700,...a},children:[g.roi>=0?"+":"",g.roi,"%"]}),e.jsxs("span",{style:{fontSize:12,color:t.dim,marginLeft:10},children:["target ",p,"%"]})]}),e.jsx(E,{text:g.roi>=p?"TARGET MET":"IN PROGRESS",color:g.roi>=p?t.ok:t.warn})]}),e.jsx("div",{style:{height:3,background:t.s2,borderRadius:2,marginBottom:14},children:e.jsx("div",{style:{height:"100%",width:`${x}%`,background:g.roi>=p?t.ok:t.accent,borderRadius:2,transition:"width 0.5s"}})}),e.jsx($e,{width:"100%",height:160,children:e.jsxs(st,{data:r,margin:{top:2,right:4,left:-24,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"g",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:t.accent,stopOpacity:.14}),e.jsx("stop",{offset:"95%",stopColor:t.accent,stopOpacity:0})]})}),e.jsx(ze,{stroke:t.border,strokeDasharray:"3 3",vertical:!1}),e.jsx(Be,{dataKey:"label",tick:{fill:t.dim,fontSize:10,fontFamily:"Courier New"},tickLine:!1,axisLine:!1,interval:4}),e.jsx(Oe,{tick:{fill:t.dim,fontSize:10,fontFamily:"Courier New"},tickLine:!1,axisLine:!1,tickFormatter:l=>`${l}%`}),e.jsx(De,{content:e.jsx(Kt,{})}),e.jsx(ke,{y:p,stroke:t.warn,strokeDasharray:"5 4",strokeWidth:1}),e.jsx(ke,{y:0,stroke:t.muted,strokeWidth:1}),e.jsx(nt,{type:"monotone",dataKey:"roi",stroke:t.accent,strokeWidth:2,fill:"url(#g)",dot:!1})]})})]})}function zt({log:s,agentCapital:n}){const r=s.filter(l=>l.fee!=null),i=parseFloat(r.reduce((l,u)=>l+(u.fee||0),0).toFixed(4)),o=parseFloat((i*B).toFixed(4)),g=parseFloat((i*H).toFixed(4)),p=s.filter(l=>l.type==="EXEC").length,x=r.slice(0,10).reverse().map((l,u)=>({label:`#${u+1}`,treasury:parseFloat((l.fee*B).toFixed(4)),pool:parseFloat((l.fee*H).toFixed(4))}));return e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,color:t.text,fontWeight:700,...a,marginBottom:4},children:"Treasury & Fee Routing"}),e.jsxs("div",{style:{fontSize:12,color:t.dim,marginBottom:16},children:["All protocol fees split automatically: ",H*100,"% agent pool Â· ",B*100,"% treasury."]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4,1fr)",gap:10,marginBottom:14},children:[{l:"Total Fees Paid",v:`${i} KAS`,c:t.text},{l:"Treasury Collected",v:`${o} KAS`,c:t.warn},{l:"Agent Pool",v:`${g} KAS`,c:t.ok},{l:"Exec Cycles",v:p,c:t.dim}].map(l=>e.jsxs(y,{p:14,children:[e.jsx(b,{children:l.l}),e.jsx("div",{style:{fontSize:18,color:l.c,fontWeight:700,...a},children:l.v})]},l.l))}),e.jsxs(y,{p:18,style:{marginBottom:12},children:[e.jsx(b,{children:"Treasury Address"}),e.jsx("div",{style:{fontSize:12,color:t.accent,...a,wordBreak:"break-all",marginBottom:10},children:G}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx(j,{onClick:()=>{var l;return(l=navigator.clipboard)==null?void 0:l.writeText(G)},variant:"ghost",size:"sm",children:"COPY"}),e.jsx(Z,{href:`${J}/addresses/${G}`,label:"VERIFY ON-CHAIN â†—"})]})]}),x.length>0&&e.jsxs(y,{p:18,style:{marginBottom:12},children:[e.jsxs(b,{children:["Fee Split History (last ",x.length," cycles)"]}),e.jsx($e,{width:"100%",height:120,children:e.jsxs(ot,{data:x,margin:{top:4,right:4,left:-24,bottom:0},children:[e.jsx(ze,{stroke:t.border,vertical:!1}),e.jsx(Be,{dataKey:"label",tick:{fill:t.dim,fontSize:10,fontFamily:"Courier New"},tickLine:!1,axisLine:!1}),e.jsx(Oe,{tick:{fill:t.dim,fontSize:10,fontFamily:"Courier New"},tickLine:!1,axisLine:!1,tickFormatter:l=>`${l}`}),e.jsx(De,{contentStyle:{background:t.s2,border:`1px solid ${t.border}`,borderRadius:4,...a,fontSize:11}}),e.jsx(Ee,{dataKey:"pool",fill:t.ok,radius:[2,2,0,0],name:"Agent Pool"}),e.jsx(Ee,{dataKey:"treasury",fill:t.warn,radius:[2,2,0,0],name:"Treasury"})]})})]}),e.jsxs(y,{p:0,children:[e.jsx("div",{style:{padding:"11px 16px",borderBottom:`1px solid ${t.border}`},children:e.jsx("span",{style:{fontSize:11,color:t.dim,...a},children:"FEE LEDGER â€” ALL ENTRIES"})}),r.slice(0,12).map((l,u)=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"90px 60px 90px 90px 1fr",gap:8,padding:"8px 16px",borderBottom:`1px solid ${t.border}`,alignItems:"center"},children:[e.jsx("span",{style:{fontSize:11,color:t.dim,...a},children:ee(l.ts)}),e.jsx("span",{style:{fontSize:11,color:Qe[l.type],...a,fontWeight:700},children:l.type}),e.jsxs("span",{style:{fontSize:12,color:t.text,...a},children:[l.fee," KAS"]}),e.jsxs("span",{style:{fontSize:11,color:t.warn,...a},children:[(l.fee*B).toFixed(4)," â†’ tsy"]}),e.jsx("span",{style:{fontSize:11,color:t.dim,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:l.msg})]},u))]})]})}function Bt({agent:s,wallet:n}){var q,U;const[r,i]=m.useState(null),[o,g]=m.useState([]),[p,x]=m.useState(!1),[l,u]=m.useState(null),[h,f]=m.useState(null),[T,S]=m.useState(null),[L,K]=m.useState(""),[F,I]=m.useState(""),[C,M]=m.useState(""),A=m.useCallback(async()=>{x(!0),u(null);try{let k;(n==null?void 0:n.provider)==="kasware"?k=await V.getKaswareBalance():k=(await Xe((n==null?void 0:n.address)||s.wallet)).kas;const w=await kt((n==null?void 0:n.address)||s.wallet);i(k),g(Array.isArray(w)?w.slice(0,10):[]),f(new Date)}catch(k){u(k.message)}x(!1)},[n,s]);m.useEffect(()=>{A()},[]);const ce=parseFloat(r??s.capitalLimit??0),$=Math.max(0,ce-we-He).toFixed(4),te=()=>{!ae(L)||parseFloat(F)<=0||S({type:"WITHDRAW",from:n==null?void 0:n.address,to:L,amount_kas:parseFloat(F),purpose:C||"Withdrawal"})},se=()=>{S(null),K(""),I(""),M("")};return e.jsxs("div",{children:[T&&e.jsx(fe,{tx:T,wallet:n,onSign:se,onReject:()=>S(null)}),e.jsxs(y,{p:20,style:{marginBottom:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:14},children:[e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs(b,{children:["Connected Wallet â€” ",Ge]}),e.jsx("div",{style:{fontSize:12,color:t.accent,...a,wordBreak:"break-all",marginBottom:10},children:(n==null?void 0:n.address)||"â€”"}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsx(j,{onClick:()=>{var k;return(k=navigator.clipboard)==null?void 0:k.writeText((n==null?void 0:n.address)||"")},variant:"ghost",size:"sm",children:"COPY"}),e.jsx(Z,{href:`${J}/addresses/${n==null?void 0:n.address}`,label:"EXPLORER â†—"})]})]}),e.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center",flexShrink:0,marginLeft:14},children:[e.jsx(E,{text:(n==null?void 0:n.provider)==="demo"?"DEMO":((q=n==null?void 0:n.provider)==null?void 0:q.toUpperCase())||"â€”",color:(n==null?void 0:n.provider)==="kasware"?t.ok:t.warn,dot:!0}),e.jsx(j,{onClick:A,disabled:p,size:"sm",variant:"ghost",children:p?"...":"REFRESH"})]})]}),l&&e.jsxs("div",{style:{background:t.dLow,border:`1px solid ${t.danger}30`,borderRadius:4,padding:"8px 12px",marginBottom:12,fontSize:12,color:t.danger,...a},children:["RPC: ",l]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gap:12},children:[["Balance",`${r??s.capitalLimit} KAS`,r?t.accent:t.warn],["UTXOs",r?String(o.length):"â€”",t.text],["Network",(n==null?void 0:n.network)||de,t.dim]].map(([k,w,z])=>e.jsxs("div",{children:[e.jsx(b,{children:k}),e.jsx("div",{style:{fontSize:18,color:z,fontWeight:700,...a},children:w})]},k))}),h&&e.jsxs("div",{style:{fontSize:11,color:t.dim,marginTop:8,...a},children:["Fetched ",h.toLocaleTimeString()," via ",We]})]}),e.jsxs(y,{p:20,style:{marginBottom:12},children:[e.jsx(b,{children:"Withdraw KAS"}),e.jsxs("div",{style:{background:t.s2,borderRadius:4,padding:"9px 13px",marginBottom:12,display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{style:{fontSize:11,color:t.dim,...a},children:["Available (after ",we," KAS reserve)"]}),e.jsxs("span",{style:{fontSize:14,color:t.accent,fontWeight:700,...a},children:[$," KAS"]})]}),e.jsx(O,{label:"Recipient Address",value:L,onChange:K,placeholder:"kaspa:... or kaspatest:..."}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:8,alignItems:"flex-end",marginBottom:12},children:[e.jsx(O,{label:`Amount (max ${$} KAS)`,value:F,onChange:I,type:"number",suffix:"KAS",placeholder:"0.0000"}),e.jsx(j,{onClick:()=>I($),variant:"ghost",size:"sm",style:{marginBottom:1},children:"MAX"})]}),e.jsx(O,{label:"Note (optional)",value:C,onChange:M,placeholder:"e.g. Profit extraction"}),e.jsxs(j,{onClick:te,disabled:!ae(L)||parseFloat(F)<=0,style:{width:"100%",padding:"10px 0"},children:["INITIATE WITHDRAWAL â€” SIGN WITH ",((U=n==null?void 0:n.provider)==null?void 0:U.toUpperCase())||"WALLET"]})]}),e.jsxs(y,{p:20,style:{marginBottom:12},children:[e.jsx(b,{children:"Deposit KAS"}),e.jsx("div",{style:{fontSize:12,color:t.dim,marginBottom:12},children:"Send KAS directly to your connected wallet address. Funds are available after DAG confirmation (~1â€“2s)."}),e.jsxs("div",{style:{background:t.s2,borderRadius:4,padding:14,border:`1px solid ${t.accent}25`},children:[e.jsx("div",{style:{fontSize:12,color:t.accent,...a,wordBreak:"break-all",marginBottom:10},children:(n==null?void 0:n.address)||"â€”"}),e.jsx(Z,{href:`${J}/addresses/${n==null?void 0:n.address}`,label:"VIEW ON KASPA EXPLORER â†—"})]})]}),o.length>0&&e.jsxs(y,{p:0,children:[e.jsx("div",{style:{padding:"11px 16px",borderBottom:`1px solid ${t.border}`,display:"flex",justifyContent:"space-between"},children:e.jsxs("span",{style:{fontSize:11,color:t.dim,...a},children:["UTXO SET â€” ",o.length," outputs"]})}),o.map((k,w)=>{var X,P,ne;const z=he((((X=k.utxoEntry)==null?void 0:X.amount)||0)/1e8,4),v=(P=k.utxoEntry)==null?void 0:P.blockDaaScore,R=(ne=k.outpoint)==null?void 0:ne.transactionId;return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 100px 120px 60px",gap:8,padding:"8px 16px",borderBottom:`1px solid ${t.border}`,alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:11,color:t.dim,...a,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[R==null?void 0:R.slice(0,34),"..."]}),e.jsxs("span",{style:{fontSize:12,color:t.ok,fontWeight:700,...a,textAlign:"right"},children:[z," KAS"]}),e.jsxs("span",{style:{fontSize:11,color:t.dim,...a,textAlign:"right"},children:["DAA ",v]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx(Z,{href:`${J}/txs/${R}`,label:"â†—"})})]},w)})]})]})}function Ot({agent:s,wallet:n}){var ve,be,Ae;const[i,o]=m.useState("overview"),[g,p]=m.useState("RUNNING"),[x,l]=m.useState(()=>_t(s.name)),[u,h]=m.useState([]),[f,T]=m.useState(!1),[S,L]=m.useState(s.execMode||"manual"),[K]=m.useState(parseFloat(s.autoApproveThreshold)||50),[F,I]=m.useState([]),[C,M]=m.useState(null),[A,ce]=m.useState(null),[$,te]=m.useState(!0),[se,q]=m.useState(null),[U,k]=m.useState(!1),[w,z]=m.useState(!1),v=m.useCallback(d=>l(c=>[{ts:Date.now(),...d},...c]),[]),R=m.useCallback(async()=>{te(!0),q(null);try{const[d,c]=await Promise.all([Et(),Xe(n==null?void 0:n.address)]);ce({dag:d,walletKas:c.kas,address:n==null?void 0:n.address,fetched:Date.now()}),k(!0)}catch(d){k(!1),q((d==null?void 0:d.message)||"Kaspa live feed disconnected")}te(!1)},[n]);m.useEffect(()=>{R();const d=setInterval(R,5e3);let c=null;return Q&&(c=new WebSocket(Q),c.onopen=()=>{z(!0)},c.onmessage=()=>{R()},c.onerror=()=>{z(!1)},c.onclose=()=>{z(!1)}),()=>{clearInterval(d),c&&c.close()}},[R]);const X=s.risk==="low"?.4:s.risk==="medium"?.65:.85,P=async()=>{var d;if(!(g!=="RUNNING"||f)){if(!A){v({type:"ERROR",msg:"No live Kaspa data available. Reconnect feed before running cycle.",fee:null});return}T(!0),v({type:"DATA",msg:`Kaspa DAG snapshot: DAA ${((d=A==null?void 0:A.dag)==null?void 0:d.daaScore)||"â€”"} Â· Wallet ${(A==null?void 0:A.walletKas)||"â€”"} KAS`,fee:null});try{const c=await wt(s,A||{});v({type:"AI",msg:`${c.action} Â· Conf ${c.confidence_score} Â· Kelly ${(c.kelly_fraction*100).toFixed(1)}% Â· Monte Carlo ${c.monte_carlo_win_pct}% win`,fee:.12});const N=c.confidence_score>=_e;if(!(c.risk_score<=X))v({type:"VALID",msg:`Risk gate FAILED â€” score ${c.risk_score} > ${X} ceiling`,fee:null}),v({type:"EXEC",msg:"BLOCKED by risk gate",fee:.03});else if(!N)v({type:"VALID",msg:`Confidence ${c.confidence_score} < ${_e} threshold`,fee:null}),v({type:"EXEC",msg:"HOLD â€” confidence gate enforced",fee:.08});else if(v({type:"VALID",msg:`Risk OK (${c.risk_score}) Â· Conf OK (${c.confidence_score}) Â· Kelly ${(c.kelly_fraction*100).toFixed(1)}%`,fee:null}),h(re=>[{ts:Date.now(),dec:c,kasData:A},...re]),c.action!=="HOLD"){const re={id:Pe(),type:c.action,from:n==null?void 0:n.address,to:G,amount_kas:c.capital_allocation_kas,purpose:c.rationale.slice(0,60),status:"pending",ts:Date.now(),dec:c};if(S==="autonomous"&&c.capital_allocation_kas<=K){await new Promise(xe=>setTimeout(xe,400));const ie=Array.from({length:64},()=>"0123456789abcdef"[Math.floor(Math.random()*16)]).join("");v({type:"EXEC",msg:`AUTO-APPROVED: ${c.action} Â· ${c.capital_allocation_kas} KAS Â· txid: ${ie.slice(0,16)}...`,fee:.08}),v({type:"TREASURY",msg:`Fee split â†’ Pool: ${(W*H).toFixed(4)} KAS / Treasury: ${(W*B).toFixed(4)} KAS`,fee:W}),I(xe=>[{...re,status:"signed",txid:ie},...xe])}else v({type:"SIGN",msg:`Action queued for wallet signature: ${c.action} Â· ${c.capital_allocation_kas} KAS`,fee:null}),I(ie=>[re,...ie])}else v({type:"EXEC",msg:"HOLD â€” no action taken",fee:.08})}catch(c){v({type:"ERROR",msg:c.message,fee:null})}T(!1)}},ne=d=>{M(d)},Je=d=>{I(c=>c.map(N=>N.id===d?{...N,status:"rejected"}:N)),v({type:"SIGN",msg:`Transaction rejected by operator: ${d}`,fee:null})},Ze=d=>{var c;I(N=>N.map(oe=>oe.id===(C==null?void 0:C.id)?{...oe,status:"signed",txid:d.txid}:oe)),v({type:"EXEC",msg:`SIGNED: ${C==null?void 0:C.type} Â· ${C==null?void 0:C.amount_kas} KAS Â· txid: ${(c=d.txid)==null?void 0:c.slice(0,16)}...`,fee:.08}),v({type:"TREASURY",msg:`Fee split â†’ Pool: ${(W*H).toFixed(4)} KAS / Treasury: ${(W*B).toFixed(4)} KAS`,fee:W}),M(null)},Se=()=>{p("SUSPENDED"),v({type:"SYSTEM",msg:"KILL-SWITCH activated â€” agent suspended. All pending actions cancelled.",fee:null}),I(d=>d.map(c=>c.status==="pending"?{...c,status:"rejected"}:c))},_=F.filter(d=>d.status==="pending").length,pe=parseFloat(x.filter(d=>d.fee).reduce((d,c)=>d+(c.fee||0),0).toFixed(4)),et=[{k:"overview",l:"OVERVIEW"},{k:"intelligence",l:"INTELLIGENCE"},{k:"queue",l:`QUEUE${_>0?` (${_})`:""}`},{k:"treasury",l:"TREASURY"},{k:"wallet",l:"WALLET"},{k:"log",l:"LOG"},{k:"controls",l:"CONTROLS"}];return e.jsxs("div",{style:{maxWidth:1080,margin:"0 auto",padding:"18px 20px"},children:[C&&e.jsx(fe,{tx:C,wallet:n,onSign:Ze,onReject:()=>M(null)}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:16},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:11,color:t.dim,letterSpacing:"0.1em",...a,marginBottom:2},children:["FORGEOS / AGENT / ",s.name]}),e.jsx("div",{style:{fontSize:18,color:t.text,fontWeight:700,...a},children:s.name})]}),e.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center",flexWrap:"wrap",justifyContent:"flex-end"},children:[e.jsx(E,{text:g,color:g==="RUNNING"?t.ok:g==="PAUSED"?t.warn:t.danger,dot:!0}),e.jsx(E,{text:S.toUpperCase(),color:t.accent}),e.jsx(E,{text:((ve=n==null?void 0:n.provider)==null?void 0:ve.toUpperCase())||"WALLET",color:t.purple,dot:!0}),e.jsx(E,{text:U?"DAG LIVE":"DAG OFFLINE",color:U?t.ok:t.danger,dot:!0}),e.jsx(E,{text:Q?w?"STREAM LIVE":"STREAM DOWN":"STREAM OFF",color:Q?w?t.ok:t.warn:t.dim,dot:!0})]})]}),!!se&&e.jsxs("div",{style:{background:t.dLow,border:`1px solid ${t.danger}40`,borderRadius:6,padding:"11px 16px",marginBottom:14,display:"flex",alignItems:"center",justifyContent:"space-between",gap:10},children:[e.jsxs("span",{style:{fontSize:12,color:t.danger,...a},children:["Kaspa live feed error (poll fallback): ",se]}),e.jsx(j,{onClick:R,disabled:$,size:"sm",variant:"ghost",children:$?"RECONNECTING...":"RECONNECT FEED"})]}),_>0&&e.jsxs("div",{style:{background:t.wLow,border:`1px solid ${t.warn}40`,borderRadius:6,padding:"11px 16px",marginBottom:14,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("span",{style:{fontSize:12,color:t.warn,...a},children:["âš  ",_," transaction",_>1?"s":""," awaiting wallet signature"]}),e.jsx(j,{onClick:()=>o("queue"),size:"sm",variant:"warn",children:"VIEW QUEUE"})]}),e.jsx("div",{style:{display:"flex",borderBottom:`1px solid ${t.border}`,marginBottom:18,overflowX:"auto"},children:et.map(d=>e.jsx("button",{onClick:()=>o(d.k),style:{background:"none",border:"none",borderBottom:`2px solid ${i===d.k?t.accent:"transparent"}`,color:i===d.k?t.accent:t.dim,padding:"7px 14px",fontSize:11,cursor:"pointer",letterSpacing:"0.08em",...a,marginBottom:-1,whiteSpace:"nowrap",transition:"color 0.15s"},children:d.l},d.k))}),i==="overview"&&e.jsxs("div",{children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4,1fr)",gap:10,marginBottom:12},children:[{l:"Wallet Balance",v:`${(A==null?void 0:A.walletKas)||s.capitalLimit} KAS`,s:D(n==null?void 0:n.address),c:t.accent},{l:"DAA Score",v:((Ae=(be=A==null?void 0:A.dag)==null?void 0:be.daaScore)==null?void 0:Ae.toLocaleString())||"â€”",s:"Kaspa DAG height",c:t.text},{l:"Pending Signatures",v:_,s:"In action queue",c:_>0?t.warn:t.dim},{l:"Total Protocol Fees",v:`${pe} KAS`,s:`${(pe*B).toFixed(4)} KAS â†’ treasury`,c:t.text}].map(d=>e.jsxs(y,{p:14,children:[e.jsx(b,{children:d.l}),e.jsx("div",{style:{fontSize:18,color:d.c,fontWeight:700,...a,marginBottom:2},children:d.v}),e.jsx("div",{style:{fontSize:11,color:t.dim},children:d.s})]},d.l))}),e.jsx("div",{style:{marginBottom:12},children:e.jsx($t,{decisions:u,kpiTarget:s.kpiTarget})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:12},children:[e.jsxs(y,{p:18,children:[e.jsx(b,{children:"Agent Configuration"}),[["Strategy","Momentum / On-Chain Flow"],["Risk",s.risk.toUpperCase()],["Capital / Cycle",`${s.capitalLimit} KAS`],["Exec Mode",S.toUpperCase()],["Auto-Approve â‰¤",`${K} KAS`],["Horizon",`${s.horizon} days`],["KPI Target",`${s.kpiTarget}% ROI`]].map(([d,c])=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"7px 0",borderBottom:`1px solid ${t.border}`},children:[e.jsx("span",{style:{fontSize:12,color:t.dim,...a},children:d}),e.jsx("span",{style:{fontSize:12,color:t.text,...a},children:c})]},d))]}),e.jsxs(y,{p:18,children:[e.jsx(b,{children:"Actions"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[e.jsx(j,{onClick:P,disabled:f||g!=="RUNNING",style:{padding:"10px 0"},children:f?"PROCESSING...":"RUN QUANT CYCLE"}),e.jsx(j,{onClick:R,disabled:$,variant:"ghost",style:{padding:"9px 0"},children:$?"FETCHING DAG...":U?"REFRESH KASPA DATA":Q?"RECONNECT STREAM/DATA":"RECONNECT KASPA FEED"}),e.jsxs(j,{onClick:()=>o("queue"),variant:"ghost",style:{padding:"9px 0"},children:["ACTION QUEUE ",_>0?`(${_})`:""]}),e.jsx(j,{onClick:()=>p(d=>d==="RUNNING"?"PAUSED":"RUNNING"),variant:"ghost",style:{padding:"9px 0"},children:g==="RUNNING"?"PAUSE":"RESUME"}),e.jsx(j,{onClick:Se,variant:"danger",style:{padding:"9px 0"},children:"KILL-SWITCH"})]})]})]})]}),i==="intelligence"&&e.jsx(Lt,{decisions:u,loading:f,onRun:P}),i==="queue"&&e.jsx(Nt,{queue:F,wallet:n,onSign:ne,onReject:Je}),i==="treasury"&&e.jsx(zt,{log:x,agentCapital:s.capitalLimit}),i==="wallet"&&e.jsx(Bt,{agent:s,wallet:n}),i==="log"&&e.jsxs(y,{p:0,children:[e.jsxs("div",{style:{padding:"12px 18px",borderBottom:`1px solid ${t.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:11,color:t.dim,...a},children:[x.length," entries Â· ",pe," KAS fees"]}),e.jsx(j,{onClick:P,disabled:f||g!=="RUNNING",size:"sm",children:f?"...":"RUN CYCLE"})]}),e.jsx("div",{style:{maxHeight:520,overflowY:"auto"},children:x.map((d,c)=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"92px 72px 1fr 80px",gap:10,padding:"8px 18px",borderBottom:`1px solid ${t.border}`,alignItems:"center"},children:[e.jsx("span",{style:{fontSize:11,color:t.dim,...a},children:ee(d.ts)}),e.jsx("span",{style:{fontSize:11,color:Qe[d.type]||t.dim,fontWeight:700,...a},children:d.type}),e.jsx("span",{style:{fontSize:12,color:t.text,...a,lineHeight:1.4},children:d.msg}),e.jsx("span",{style:{fontSize:11,color:t.dim,textAlign:"right",...a},children:d.fee!=null?`${d.fee} KAS`:"â€”"})]},c))})]}),i==="controls"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:14},children:[e.jsxs(y,{p:18,children:[e.jsx(b,{children:"Execution Mode"}),Ye.map(d=>{const c=S===d.v;return e.jsxs("div",{onClick:()=>L(d.v),style:{padding:"12px 14px",borderRadius:4,marginBottom:8,cursor:"pointer",border:`1px solid ${c?t.accent:t.border}`,background:c?t.aLow:t.s2,transition:"all 0.15s"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:3},children:[e.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:c?t.accent:t.muted,flexShrink:0}}),e.jsx("span",{style:{fontSize:12,color:c?t.accent:t.text,fontWeight:700,...a},children:d.l})]}),e.jsx("div",{style:{fontSize:11,color:t.dim,marginLeft:20},children:d.desc})]},d.v)})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[e.jsxs(y,{p:18,children:[e.jsx(b,{children:"Agent Controls"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[e.jsx(j,{onClick:()=>p(d=>d==="RUNNING"?"PAUSED":"RUNNING"),variant:"ghost",style:{padding:"10px 0"},children:g==="RUNNING"?"PAUSE AGENT":"RESUME AGENT"}),e.jsx(j,{onClick:()=>o("wallet"),variant:"ghost",style:{padding:"10px 0"},children:"MANAGE WALLET"}),e.jsx(j,{onClick:Se,variant:"danger",style:{padding:"10px 0"},children:"ACTIVATE KILL-SWITCH"})]})]}),e.jsxs(y,{p:18,children:[e.jsxs(b,{children:["Active Risk Limits â€” ",s.risk.toUpperCase()]}),[["Max Single Exposure",s.risk==="low"?"5%":s.risk==="medium"?"10%":"20%",t.warn],["Drawdown Halt",s.risk==="low"?"-8%":s.risk==="medium"?"-15%":"-25%",t.danger],["Confidence Floor","0.75",t.dim],["Kelly Cap",s.risk==="low"?"10%":s.risk==="medium"?"20%":"40%",t.warn],["Auto-Approve â‰¤",`${K} KAS`,t.accent]].map(([d,c,N])=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"7px 0",borderBottom:`1px solid ${t.border}`},children:[e.jsx("span",{style:{fontSize:12,color:t.dim,...a},children:d}),e.jsx("span",{style:{fontSize:12,color:N,fontWeight:700,...a},children:c})]},d))]})]})]})]})}function Dt(){const[s,n]=m.useState(null),[r,i]=m.useState("create"),[o,g]=m.useState(null),p=l=>{n(l)},x=l=>{g(l),i("dashboard")};return s?e.jsxs("div",{style:{background:t.bg,minHeight:"100vh",color:t.text},children:[e.jsxs("div",{style:{borderBottom:`1px solid ${t.border}`,padding:"10px 22px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:700,letterSpacing:"0.14em",...a},children:[e.jsx("span",{style:{color:t.accent},children:"FORGE"}),e.jsx("span",{style:{color:t.text},children:"OS"})]}),e.jsx("div",{style:{width:1,height:14,background:t.border}}),e.jsx("div",{style:{fontSize:10,color:t.dim,letterSpacing:"0.08em",...a},children:"AI-NATIVE FINANCIAL OS Â· KASPA"})]}),e.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[!o&&e.jsx("button",{onClick:()=>i("create"),style:{background:r==="create"?t.s2:"none",border:`1px solid ${r==="create"?t.border:"transparent"}`,color:r==="create"?t.text:t.dim,padding:"5px 14px",borderRadius:4,fontSize:11,cursor:"pointer",...a},children:"NEW AGENT"}),o&&e.jsx("button",{onClick:()=>i("dashboard"),style:{background:r==="dashboard"?t.s2:"none",border:`1px solid ${r==="dashboard"?t.accent:"transparent"}`,color:r==="dashboard"?t.accent:t.dim,padding:"5px 14px",borderRadius:4,fontSize:11,cursor:"pointer",...a},children:o.name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"5px 12px",border:`1px solid ${t.border}`,borderRadius:4},children:[e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:(s==null?void 0:s.provider)==="demo"?t.warn:t.ok}}),e.jsx("span",{style:{fontSize:10,color:t.dim,letterSpacing:"0.08em",...a},children:D(s==null?void 0:s.address)})]}),e.jsx(j,{onClick:()=>{n(null),g(null),i("create")},variant:"ghost",size:"sm",children:"DISCONNECT"})]})]}),r==="create"?e.jsx(yt,{wallet:s,onComplete:x}):e.jsx(Ot,{agent:o,wallet:s})]}):e.jsx(xt,{onConnect:p})}class Ft extends Fe.Component{constructor(n){super(n),this.state={hasError:!1,message:""}}static getDerivedStateFromError(n){return{hasError:!0,message:(n==null?void 0:n.message)||"Unknown runtime error"}}componentDidCatch(n){console.error("ForgeOS runtime crash:",n)}render(){return this.state.hasError?e.jsxs("div",{style:{minHeight:"100vh",background:"#0a0a0a",color:"#f5f5f5",padding:24,fontFamily:"ui-monospace, SFMono-Regular, Menlo, monospace"},children:[e.jsx("div",{style:{fontSize:16,fontWeight:700,marginBottom:8},children:"ForgeOS runtime error"}),e.jsx("div",{style:{fontSize:12,opacity:.8,marginBottom:12},children:"The app encountered an unexpected error. Reload, then check console/network config if this continues."}),e.jsx("pre",{style:{whiteSpace:"pre-wrap",background:"#111",border:"1px solid #222",padding:12,borderRadius:6},children:this.state.message})]}):this.props.children}}me.createRoot(document.getElementById("root")).render(e.jsx(Fe.StrictMode,{children:e.jsx(Ft,{children:e.jsx(Dt,{})})}));
