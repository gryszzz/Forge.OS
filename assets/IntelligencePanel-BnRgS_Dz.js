import{a as e,j as t,m as r,b as z,C as x,B as s,d as u,L as m}from"./index-Dn_znqGQ.js";import{r as v}from"./charts-vendor-BhZkIRjM.js";function I({decisions:a,loading:d,onRun:w}){var y;const[_,S]=v.useState(typeof window<"u"?window.innerWidth:1200);v.useEffect(()=>{if(typeof window>"u")return;const o=()=>S(window.innerWidth);return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]);const n=_<760,C=n?"repeat(2,1fr)":"repeat(4,1fr)",k=n?"78px 108px 1fr":"90px 120px 80px 80px 1fr",l=a[0],i=l==null?void 0:l.dec,g=(i==null?void 0:i.action)==="ACCUMULATE"?e.ok:(i==null?void 0:i.action)==="REDUCE"?e.danger:(i==null?void 0:i.action)==="REBALANCE"?e.purple:e.warn,f=String((i==null?void 0:i.decision_source)||(l==null?void 0:l.source)||"ai");return t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",flexDirection:n?"column":"row",justifyContent:"space-between",alignItems:n?"flex-start":"center",marginBottom:16,gap:n?8:0},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:13,color:e.text,fontWeight:700,...r},children:"Quant Intelligence Layer"}),t.jsx("div",{style:{fontSize:11,color:e.dim},children:"Kelly criterion · Monte Carlo · Volatility clustering · Behavioral inference"})]}),t.jsx(z,{onClick:w,disabled:d,children:d?"PROCESSING...":"RUN QUANT CYCLE"})]}),d&&t.jsxs(x,{p:24,style:{textAlign:"center",marginBottom:12},children:[t.jsx("div",{style:{fontSize:12,color:e.dim,...r,marginBottom:6},children:"Running quant engine..."}),t.jsx("div",{style:{fontSize:11,color:e.dim},children:"Kaspa on-chain data → Kelly sizing → Monte Carlo → Decision"})]}),!i&&!d&&t.jsxs(x,{p:40,style:{textAlign:"center",marginBottom:12},children:[t.jsx("div",{style:{fontSize:13,color:e.dim,...r,marginBottom:6},children:"No intelligence output yet."}),t.jsx("div",{style:{fontSize:12,color:e.dim},children:"Run a quant cycle to generate a structured trade decision with Kelly sizing and Monte Carlo confidence."})]}),i&&t.jsxs(t.Fragment,{children:[t.jsxs(x,{p:18,style:{marginBottom:10,border:`1px solid ${g}25`},children:[t.jsxs("div",{style:{display:"flex",alignItems:n?"flex-start":"center",justifyContent:"space-between",flexDirection:n?"column":"row",gap:n?8:0,marginBottom:14},children:[t.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[t.jsx(s,{text:i.action,color:g}),t.jsx(s,{text:i.strategy_phase,color:e.purple}),t.jsx(s,{text:`SOURCE ${f.toUpperCase()}`,color:f==="fallback"?e.warn:e.ok}),t.jsx("span",{style:{fontSize:11,color:e.dim,...r},children:u(l.ts)})]}),t.jsxs("div",{style:{display:"flex",gap:8},children:[t.jsx(s,{text:`CONF ${i.confidence_score}`,color:i.confidence_score>=.8?e.ok:e.warn}),t.jsx(s,{text:`RISK ${i.risk_score}`,color:i.risk_score<=.4?e.ok:i.risk_score<=.7?e.warn:e.danger})]})]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:C,gap:10,marginBottom:14},children:[["Kelly Fraction",`${(i.kelly_fraction*100).toFixed(1)}%`,e.accent],["Monte Carlo Win",`${i.monte_carlo_win_pct}%`,e.ok],["Capital Alloc",`${i.capital_allocation_kas} KAS`,e.text],["Expected Value",`+${i.expected_value_pct}%`,e.ok],["Stop Loss",`-${i.stop_loss_pct}%`,e.danger],["Take Profit",`+${i.take_profit_pct}%`,e.ok],["Volatility",i.volatility_estimate,i.volatility_estimate==="HIGH"?e.danger:i.volatility_estimate==="MEDIUM"?e.warn:e.ok],["Liquidity Impact",i.liquidity_impact,i.liquidity_impact==="SIGNIFICANT"?e.danger:e.dim]].map(([o,c,p])=>t.jsxs("div",{style:{background:e.s2,borderRadius:4,padding:"10px 12px"},children:[t.jsx("div",{style:{fontSize:10,color:e.dim,...r,letterSpacing:"0.06em",marginBottom:4},children:o}),t.jsx("div",{style:{fontSize:13,color:p,fontWeight:700,...r},children:c})]},o))}),t.jsxs("div",{style:{background:e.s2,borderRadius:4,padding:"10px 14px",marginBottom:12},children:[t.jsx(m,{children:"Decision Rationale"}),t.jsx("div",{style:{fontSize:13,color:e.text,lineHeight:1.5},children:i.rationale}),i.decision_source_detail&&t.jsxs("div",{style:{fontSize:11,color:e.dim,marginTop:8,...r},children:["source detail: ",i.decision_source_detail]})]}),((y=i.risk_factors)==null?void 0:y.length)>0&&t.jsxs("div",{style:{marginBottom:12},children:[t.jsx(m,{children:"Risk Factors"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:i.risk_factors.map((o,c)=>t.jsx(s,{text:o,color:e.warn},c))})]}),t.jsxs("div",{style:{background:e.aLow,borderRadius:4,padding:"10px 14px"},children:[t.jsx(m,{color:e.accent,children:"Next Review Trigger"}),t.jsx("div",{style:{fontSize:12,color:e.text},children:i.next_review_trigger})]})]}),a.length>1&&t.jsxs(x,{p:0,children:[t.jsx("div",{style:{padding:"11px 16px",borderBottom:`1px solid ${e.border}`},children:t.jsxs("span",{style:{fontSize:11,color:e.dim,...r},children:["DECISION HISTORY — ",a.length," records"]})}),a.slice(1).map((o,c)=>{var j;const p=o.dec.action==="ACCUMULATE"?e.ok:o.dec.action==="REDUCE"?e.danger:e.warn,h=String(((j=o==null?void 0:o.dec)==null?void 0:j.decision_source)||(o==null?void 0:o.source)||"ai");return t.jsxs("div",{style:{display:"grid",gridTemplateColumns:k,gap:10,padding:"9px 16px",borderBottom:`1px solid ${e.border}`,alignItems:"center"},children:[t.jsx("span",{style:{fontSize:11,color:e.dim,...r},children:u(o.ts)}),t.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[t.jsx(s,{text:o.dec.action,color:p}),!n&&t.jsx(s,{text:h==="fallback"?"F":"AI",color:h==="fallback"?e.warn:e.ok})]}),!n&&t.jsxs("span",{style:{fontSize:12,color:e.text,...r},children:[o.dec.capital_allocation_kas," KAS"]}),!n&&t.jsxs("span",{style:{fontSize:12,color:o.dec.confidence_score>=.8?e.ok:e.warn,...r},children:["c:",o.dec.confidence_score]}),t.jsx("span",{style:{fontSize:11,color:e.dim,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:o.dec.rationale})]},c)})]})]})]})}export{I as IntelligencePanel};
